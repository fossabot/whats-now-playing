
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Templates &#8212; What&#39;s Now Playing 0+untagged.1.g71e73c1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Troubleshooting" href="troubleshooting.html" />
    <link rel="prev" title="Quirks" href="quirks.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="templates">
<h1>Templates<a class="headerlink" href="#templates" title="Permalink to this heading">¶</a></h1>
<p><strong>What’s Now Playing</strong> handles almost all output via the
<a class="reference external" href="https://jinja2docs.readthedocs.io/">Jinja2 templating system</a> which
includes an extremely <a class="reference external" href="https://jinja2docs.readthedocs.io/en/stable/templates.html">powerful language</a>
that enables you a full range of customizing the output.</p>
<p>In general, <strong>What’s Now Playing</strong> provides a generic set of variables for use in any template. These
values are filled based on a few factors:</p>
<ul class="simple">
<li><p>the input source providing its data</p></li>
<li><p>media tag quality</p></li>
<li><p><strong>What’s Now Playing</strong>’s file type and tag compatibility</p></li>
</ul>
<p>Some examples:</p>
<ul class="simple">
<li><p>An MP3 file missing ID3 tags may only have <cite>title</cite> available.</p></li>
<li><p>Serato in Remote mode, title, and optionally artist are available.</p></li>
<li><p>MP4/M4V files have minimal support currently in <strong>What’s Now Playing</strong>, so will not have the label</p></li>
<li><p>VOBS files do not support tagging and will only have information available from the DJ software, if possible</p></li>
</ul>
<p>Some outputs (e.g., TwitchBot) may provide additional variables that offer
other, context-sensitive features. See their pages for more information.</p>
<section id="reminder">
<h2>Reminder<a class="headerlink" href="#reminder" title="Permalink to this heading">¶</a></h2>
<p>In order to perform these look ups, certain data is required to be tagged in the media to
make the results remotely accurate.  More data == more better results.  Therefore, media
with ISRC tags will cause MusicBrainz lookups if that service is enabled to fill in
any missing data.</p>
</section>
<section id="supported-variables">
<h2>Supported Variables<a class="headerlink" href="#supported-variables" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>album</p></td>
<td><p>Album track comes from</p></td>
</tr>
<tr class="row-odd"><td><p>albumartist</p></td>
<td><p>Artist listed on the album</p></td>
</tr>
<tr class="row-even"><td><p>artist</p></td>
<td><p>Artist for the song</p></td>
</tr>
<tr class="row-odd"><td><p>artistlongbio</p></td>
<td><p>Full biography of the artist (from “Artist Extras”)</p></td>
</tr>
<tr class="row-even"><td><p>artistshortbio</p></td>
<td><p>First paragraph of the long bio (from “Artist Extras”)</p></td>
</tr>
<tr class="row-odd"><td><p>artistwebsites</p></td>
<td><p>List of URLs for the artist</p></td>
</tr>
<tr class="row-even"><td><p>bitrate</p></td>
<td><p>Bitrate the file was encoded at</p></td>
</tr>
<tr class="row-odd"><td><p>bpm</p></td>
<td><p>Beats per minute of the song</p></td>
</tr>
<tr class="row-even"><td><p>comments</p></td>
<td><p>Comments from either the DJ software or the song file, whichever is discovered first</p></td>
</tr>
<tr class="row-odd"><td><p>composer</p></td>
<td><p>Composer of the song</p></td>
</tr>
<tr class="row-even"><td><p>coverurl</p></td>
<td><p>Relative location to fetch the cover. Note that this will only work when the webserver is active.</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>Date (either release date or date of the media)</p></td>
</tr>
<tr class="row-even"><td><p>deck</p></td>
<td><p>deck # this track is playing on</p></td>
</tr>
<tr class="row-odd"><td><p>disc</p></td>
<td><p>Disc number</p></td>
</tr>
<tr class="row-even"><td><p>discsubtitle</p></td>
<td><p>disc subtitle (if there is one)</p></td>
</tr>
<tr class="row-odd"><td><p>disc_total</p></td>
<td><p>Total number of discs in album</p></td>
</tr>
<tr class="row-even"><td><p>filename</p></td>
<td><p>Local filename of the media</p></td>
</tr>
<tr class="row-odd"><td><p>genre</p></td>
<td><p>Genre of the song</p></td>
</tr>
<tr class="row-even"><td><p>hostip</p></td>
<td><p>IP address of the machine running <strong>What’s Now Playing</strong></p></td>
</tr>
<tr class="row-odd"><td><p>hostfqdn</p></td>
<td><p>Fully qualified hostname of the machine running <strong>What’s Now Playing</strong></p></td>
</tr>
<tr class="row-even"><td><p>hostname</p></td>
<td><p>Short hostname of the machine running <strong>What’s Now Playing</strong></p></td>
</tr>
<tr class="row-odd"><td><p>httpport</p></td>
<td><p>Port number that is running the web server</p></td>
</tr>
<tr class="row-even"><td><p>isrc</p></td>
<td><p>List of <a class="reference external" href="https://isrc.ifpi.org/en/">International Standard Recording Code</a></p></td>
</tr>
<tr class="row-odd"><td><p>key</p></td>
<td><p>Key of the song</p></td>
</tr>
<tr class="row-even"><td><p>label</p></td>
<td><p>Label of the media.</p></td>
</tr>
<tr class="row-odd"><td><p>lang</p></td>
<td><p>Language used by the media</p></td>
</tr>
<tr class="row-even"><td><p>musicbrainzalbumid</p></td>
<td><p>MusicBrainz Album Id</p></td>
</tr>
<tr class="row-odd"><td><p>musicbrainzartistid</p></td>
<td><p>List of MusicBrainz Artist Ids</p></td>
</tr>
<tr class="row-even"><td><p>musicbrainzrecordingid</p></td>
<td><p>MusicBrainz Recording Id</p></td>
</tr>
<tr class="row-odd"><td><p>previoustrack</p></td>
<td><p>See below for more details.</p></td>
</tr>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the media</p></td>
</tr>
<tr class="row-odd"><td><p>track</p></td>
<td><p>Track number on the disc</p></td>
</tr>
<tr class="row-even"><td><p>track_total</p></td>
<td><p>Total tracks on the disc</p></td>
</tr>
</tbody>
</table>
</section>
<section id="implementation-notes">
<h2>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Permalink to this heading">¶</a></h2>
<section id="arrays">
<h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this heading">¶</a></h3>
<p>Some fields that might be multi-valued (e.g., genre) will be merged into one. If they
are not merged, the description will specifically say it is a list.</p>
</section>
<section id="undefined">
<h3>Undefined<a class="headerlink" href="#undefined" title="Permalink to this heading">¶</a></h3>
<p>When rendering templates, <strong>What’s Now Playing</strong> will set any undefined variables to the empty string.
Instead of having to render a template as:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">variable</span> <span class="k">is</span> <span class="nf">defined</span> <span class="k">and</span> <span class="nv">variable</span> <span class="k">is</span> <span class="k">not</span> <span class="nf">none</span> <span class="k">and</span> <span class="nv">variable</span><span class="o">|</span><span class="nf">length</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>This can be short-cut to:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">variable</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>since the variable will always be defined. This also means that templates
that incorrectly use the wrong variable name will render, just with an empty
string in place of the expected text.</p>
</section>
</section>
<section id="previous-track-details">
<h2>Previous Track Details<a class="headerlink" href="#previous-track-details" title="Permalink to this heading">¶</a></h2>
<p>The <cite>previoustrack</cite> variable is a list of played tracks in _reverse_ order, starting with
current track at zero. It currently holds just the artist and the title of the
track. Some examples:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">previoustrack</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="nv">.artist</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>will show the current artist playing.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">previoustrack</span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="nv">.artist</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>will show the previous-to-current artist.</p>
<p>To get the title of the track played 2 tracks ago:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">previoustrack</span><span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="nv">.title</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>For a more complex example, see the <cite>twitchbot_previoustrack.txt</cite> file
in the templates directory.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">What's Now Playing</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="input/index.html">Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="output/index.html">Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="requests.html">User Track Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter.html">Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="recognition/index.html">Music Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="extras/index.html">Artist Extras</a></li>
<li class="toctree-l1"><a class="reference internal" href="beam.html">Two-Computer Setup With Beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="quirks.html">Quirks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reminder">Reminder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-variables">Supported Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-notes">Implementation Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#previous-track-details">Previous Track Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html#bug-reports-and-feature-requests">Bug Reports and Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparisons.html">Versus Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery of Templates</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="quirks.html" title="previous chapter">Quirks</a></li>
      <li>Next: <a href="troubleshooting.html" title="next chapter">Troubleshooting</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021-2023, Allen Wittenauer.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/templatevariables.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>